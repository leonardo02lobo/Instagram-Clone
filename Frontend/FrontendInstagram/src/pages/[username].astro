---
const { username } = Astro.params;

import Etiquetado from "../assets/icons/Etiquetado.astro";
import Guardar from "../assets/icons/Guardar.astro";
import Publicaciones from "../assets/icons/Publicaciones.astro";
import Reels from "../assets/icons/Reels.astro";
import Layout from "../layout/Layout.astro";
import { getUsers } from "../utils/userService";

export async function getStaticPaths() {
    const users = await getUsers();
    const elements = users.data;
    console.log(elements[0].username);
    return elements.map((user: any) => ({
        params: { username: user.username },
    }));
}
---

<Layout titulo="Instagram">
    <div class="flex flex-col w-full px-32">
        <section class="w-full flex flex-row justify-center gap-20 py-10">
            <!-- Datos -->
            <div class="flex justify-center items-center">
                <img src="/public/Assets/fotosinperfil.png" alt="" class="rounded-full w-32 border-4 border-gray-700 p-1">
            </div>
            <div class="flex flex-col justify-center items-start gap-5">
                <p>Name</p>
                <p class="flex flex-row gap-7">
                    <span>0 Post</span>
                    <span>0 Followers</span>
                    <span>0 following</span>
                </p>
                <p>Nombre</p>
                <p>Bio</p>
            </div>
        </section>
        <section class="flex flex-row gpa-4 justify-start items-center">
            <!-- Historias -->
            <div class="w-20 rounded-full bg-gray-900 h-20 text-4xl text-center flex justify-center items-center border-4 border-gray-600 p-1">
                +
            </div>
        </section>
        <section class="flex flex-col p-9">
            <!-- Publicaciones -->
             <div class="flex flex-row gap-44 justify-center items-center">
                <Publicaciones/>
                <Reels/>
                <Guardar/>
                <Etiquetado/>
             </div>
        </section>
    </div>

</Layout>
<script>
    fetch("http://localhost:8080/api/perfil", {
        method: "GET",
        credentials: "include",
    })
        .then((res) => res.json())
        .then((data) => console.log(data))
        .catch((err) => console.error("Error:", err));
</script>
